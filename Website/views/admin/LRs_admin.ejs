<div class="pelayanan_admin_section">
  <div class="pelayanan_dashboard_wrapper">
    <div class="PAdmin_left">
      <div class="Padmin_title">
        <h1>Data<span> Rumah Sakit</span></h1>
      </div>
      <div class="Padmin_pelayananmasuk">
        <br />
        <div class="Padmin_pelayananmasuk_sort">
          <div class="Padmin_pelayananmasuk_tambahperusahaan">
            <a href="/TambahRS_admin">Tambah Data Rumah Sakit</a>
          </div>
        </div>
        <div class="Padmin_pelayananmasuk_search">
          <input type="text" id="searchInput" placeholder="Masukan nama rumah sakit . . ." />
          <button id="searchButton"><i class="fa-solid fa-search"></i></button>
      </div>
        <div class="Padmin_pelayananmasuk_table">
          <table>
            <thead>
              <tr>
                <th>No</th>
                <th>Nama RS</th>
                <th>Status</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="rsTableBody">
              <% RSData.forEach((RSitems, index) => { %>
              <tr>
                <td><%= index + 1 %></td>
                <td><%= RSitems.nama_rs %></tds>
                <td class="<%= RSitems.status_rs === 1 ? 'status-aktif' :'status-tidak-aktif' %>"><%= RSitems.status_rs === 1 ? 'Aktif' : 'Tidak Aktif' %></td>
                <td><a href="/DetailRS_admin/<%= RSitems.id_rs %>">Detail</a></td>
              </tr>
              <% }) %>
            </tbody>
          </table>
        </div>
      </div>
      <div class="Padmin_notifikasi_obatvaksin_responsive" id="none">
        <div class="Padmin_notifikasi_obatvaksin">
          <div class="Padmin_notifikasi_title">
            <h2>Stok<span>Obat</span></h2>
          </div>
          <div class="Padmin_stok_obatvaksin">
            <a href="/StokObat_admin">Lihat Stok Obat</a>
          </div>
        </div>
        <div class="Padmin_notifikasi_obatvaksin">
          <div class="Padmin_notifikasi_title">
            <h2>Stok<span>Vaksin</span></h2>
          </div>
          <div class="Padmin_stok_obatvaksin">
            <a href="/StokVaksin_admin">Lihat Stok Vaksin</a>
          </div>
        </div>
      </div>
    </div>
    <div class="PAdmin_right">
      <div class="Padmin_notifikasi_wrapper">
          <div class="Padmin_notifikasi_obatvaksin">
            <div class="Padmin_notifikasi_title">
              <h2>Stok<span>Obat</span></h2>
            </div>
            <div class="Padmin_stok_obatvaksin">
              <a href="/StokObat_admin">Lihat Stok Obat</a>
            </div>
          </div>
          <div class="Padmin_notifikasi_obatvaksin">
            <div class="Padmin_notifikasi_title">
              <h2>Stok<span>Vaksin</span></h2>
            </div>
            <div class="Padmin_stok_obatvaksin">
              <a href="/StokVaksin_admin">Lihat Stok Vaksin</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<style>
  .status-aktif {
    color: var(--green-color);
  }

  .status-tidak-aktif {
    color: var(--red-color);
  }
</style>
<script>
document.getElementById('searchButton').addEventListener('click', function() {
    const searchQuery = document.getElementById('searchInput').value;

    fetch(`/searchRS?q=${encodeURIComponent(searchQuery)}`)
        .then(response => response.json())
        .then(data => {
            const rsTableBody = document.getElementById('rsTableBody');
            rsTableBody.innerHTML = ''; // Clear current table contents

            if (data.length === 0) {
                rsTableBody.innerHTML = `
                  <tr>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                    <td>-</td>
                  </tr>`;
                return;
            }

            data.forEach((RSitems, index) => {
                const statusClass = RSitems.status_rs === 1 ? 'status-aktif' : 'status-tidak-aktif';
                const  statusText = RSitems.status_rs === 1 ? 'Aktif' : 'Tidak Aktif';
                const row = `
                  <tr>
                    <td>${index + 1}</td>
                    <td>${RSitems.nama_rs}</td>
                    <td class="${statusClass}">${statusText}</td>
                    <td><a href="/DetailRS_admin/${RSitems.id_rs}">Detail</a></td>
                  </tr>`;
                
                rsTableBody.insertAdjacentHTML('beforeend', row);
            });
        })
        .catch(error => {
            console.error('Error fetching search results:', error);
            rsTableBody.innerHTML = `
              <tr>
                <td>-</td>
                <td>-</td>
                <td>-</td>
                <td>-</td>
              </tr>`;
        });
});
</script>