<div class="pelayanan_admin_section">
  <div class="pelayanan_dashboard_wrapper">
    <div class="PAdmin_left">
      <div class="Padmin_title">
        <h1>Edit<span> Data RS</span></h1>
      </div>
      <div class="Padmin_pelayananmasuk">
        <div class="Padmin_pelayananmasuk_wrapper">
          <form action="/EditDetailRS_admin/<%= RSData.id_rs %>" method="post" enctype="multipart/form-data" class="edit-profile-perusahaan" id="editDataRS">
            <div class="Padmin_pelayananmasuk_pic">
              <img id="profilePic" src="/img/<%= RSData.photo_rs %>" alt="Company Pictures" />
              <span class="change-text">Ubah Gambar</span>
              <input type="file" name="photo_rs" id="fileInput" accept="image/*" style="display: none" />
            </div>
            <div class="Padmin_pelayananmasuk_data">
              <div class="Padmin_pelayananmasuk_datamenu">
                <h3>Nama Rumah Sakit</h3>
                <div class="Padmin_pelayananmasuk_datamenu_input">
                  <i class="fa-solid fa-hospital"></i>
                  <input type="text" id="nama_rs" name="nama_rs" value="<%= RSData.nama_rs %>" placeholder="Masukan Nama Rumah Sakit . . ." />
                </div>
              </div>
              <div class="Padmin_pelayananmasuk_datamenu">
                <h3>Email</h3>
                <div class="Padmin_pelayananmasuk_datamenu_input">
                  <i class="fa-solid fa-envelope"></i>
                  <input type="email" id="email_rs" name="email_rs" value="<%= RSData.email_rs %>" placeholder="Masukan Email Rumah Sakit . . ." />
                </div>
              </div>
              <div class="Padmin_pelayananmasuk_datamenu">
                <h3>Nomor Telepon</h3>
                <div class="Padmin_pelayananmasuk_datamenu_input">
                  <i class="fa-solid fa-square-phone"></i>
                  <input type="text" name="nomortelepon_rs" id="nomortelepon_rs" value="<%= RSData.nomortelepon_rs %>" placeholder="Masukan Nomor Telepon Rumah Sakit. . ." />
                </div>
              </div>
              <div class="Padmin_pelayananmasuk_datamenu">
                <h3>Status Akun</h3>
                <select name="status_rs" id="status_rs">
                  <option value="1" <%= RSData.status_rs === 1 ? 'selected' : '' %>>Aktif</option>
                  <option value="0" <%= RSData.status_rs === 0 ? 'selected' : '' %>>Tidak Aktif</option>
                </select>
              </div>
            </div>
            <div class="Padmin_pelayananmasuk_catatan">
              <h2>Alamat Lengkap</h2>
              <div class="Padmin_pelayananmasuk_datamenu_input" id="alamat_perusahaan_input">
                <i class="fa-solid fa-map-location-dot"></i>
                <input type="text" name="alamat_rs"  value="<%= RSData.alamat_rs %>" id="alamat_rs" placeholder="Masukan Alamat Lengkap RS . . ." />
              </div>
            </div>
            <input type="hidden" name="existing_photo_rs" id="existing_photo_rs" value="<%= RSData.photo_rs %>">
            <div class="edit-all-button">
              <div class="edit-menu-button">
                <button type="submit">Konfirmasi</button>
              </div>
              <div class="back-menu-button">
                <a href="/DetailRS_admin/<%= RSData.id_rs %>">Kembali</a>
              </div>
            </div>
             <div class="validasi" id="validasi">
              <p id="validasi_text">Pastikan data yang anda masukkan benar dan valid</p>
            </div>
          </form>
        </div>
      </div>

      <div class="Padmin_notifikasi_obatvaksin_responsive" id="none">
        <div class="Padmin_notifikasi_obatvaksin">
          <div class="Padmin_notifikasi_title">
            <h2>Stok<span>Obat</span></h2>
          </div>
          <div class="Padmin_stok_obatvaksin">
            <a href="/StokObat_admin">Lihat Stok Obat</a>
          </div>
        </div>
        <div class="Padmin_notifikasi_obatvaksin">
          <div class="Padmin_notifikasi_title">
            <h2>Stok<span>Vaksin</span></h2>
          </div>
          <div class="Padmin_stok_obatvaksin">
            <a href="/StokVaksin_admin">Lihat Stok Vaksin</a>
          </div>
        </div>
      </div>
    </div>
    <div class="PAdmin_right">
      <div class="Padmin_notifikasi_wrapper">
          <div class="Padmin_notifikasi_obatvaksin">
            <div class="Padmin_notifikasi_title">
              <h2>Stok<span>Obat</span></h2>
            </div>
            <div class="Padmin_stok_obatvaksin">
              <a href="/StokObat_admin">Lihat Stok Obat</a>
            </div>
          </div>
          <div class="Padmin_notifikasi_obatvaksin">
            <div class="Padmin_notifikasi_title">
              <h2>Stok<span>Vaksin</span></h2>
            </div>
            <div class="Padmin_stok_obatvaksin">
              <a href="/StokVaksin_admin">Lihat Stok Vaksin</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  document.querySelector(".Padmin_pelayananmasuk_pic").addEventListener("click", function () {
    document.getElementById("fileInput").click();
  });

  document.getElementById("fileInput").addEventListener("change", function (event) {
    const reader = new FileReader();
    reader.onload = function () {
      document.getElementById("profilePic").src = reader.result;
    };
    reader.readAsDataURL(event.target.files[0]);
  });
</script>

<script>
  // validasi form 
  document.getElementById("editDataRS").addEventListener("submit", function (event) {
    const nama_rs = document.getElementById("nama_rs").value;
    const email_rs = document.getElementById("email_rs").value;
    const nomortelepon_rs = document.getElementById("nomortelepon_rs").value;
    const alamat_rs = document.getElementById("alamat_rs").value;
    const validasiDiv = document.getElementById("validasi");

    let valid = true;
    let validasiText = "Pastikan data yang dimasukan benar dan valid";

    // validasi nama rs, tidak boleh kosong
    if (nama_rs === "") {
      validasiText = "Nama RS tidak boleh kosong";
      valid = false;
    } else if (nama_rs.length < 5) {
      validasiText = "Nama RS minimal 5 karakter";
      valid = false;
    }
    // validasi email rs, tidak boleh kosong format email
    else if (email_rs === "") {
      validasiText = "Email RS tidak boleh kosong";
      valid = false;
    } else if (!email_rs.includes("@") || !email_rs.includes(".")) {
      validasiText = "Email RS tidak valid";
      valid = false;
    }
    // validasi nomor telepon rs, tidak boleh kosong harus angka minimal 10 digit
    else if (nomortelepon_rs === "") {
      validasiText = "Nomor Telepon RS tidak boleh kosong";
      valid = false;
    } else if (isNaN(nomortelepon_rs)) {
      validasiText = "Nomor Telepon RS harus angka";
      valid = false;
    } else if (nomortelepon_rs.length < 10) {
      validasiText = "Nomor Telepon RS minimal 10 digit";
      valid = false;
    } 
    // validasi alamat rs, tidak boleh kosong
    else if (alamat_rs === "") {
      validasiText = "Alamat RS tidak boleh kosong";
      valid = false;
    } else if (alamat_rs.length < 10) {
      validasiText = "Alamat RS minimal 10 karakter";
      valid = false;
    }

    if (!valid) {
      event.preventDefault();
      validasiDiv.style.display = "flex";
      document.getElementById("validasi_text").innerText = validasiText;
    } else {
      validasiDiv.style.display = "none";
    }
  })
</script>
<style>
  .Padmin_pelayananmasuk_datamenu select {
    width: 100px;
    padding: 5px;
    border-radius: 5px;
    border: none;
    outline: none;
    background-color: var(--cream-color);
    color: var(--secondary-color);
    cursor: pointer;
  }
  .validasi {
    display: none;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    margin-top: 10px;
    border: 1px dashed var(--red-color);
    padding: 5px;
    text-align: center;
  }
  .validasi p {
    color: var(--red-color);
    font-size: 12px;
    text-align: center;
  }
</style>