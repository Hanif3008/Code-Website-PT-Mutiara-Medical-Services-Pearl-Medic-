<div class="pelayanan_admin_section">
  <div class="pelayanan_dashboard_wrapper">
    <div class="PAdmin_left">
      <div class="Padmin_title">
        <h1>Edit <span>Password Dokter</span></h1>
      </div>
      <div class="Padmin_notifikasi_responsive" id="none">
        <div class="Padmin_notifikasi_wrapper" id="Padmin_notifikasi_wrapper">
          <div class="Padmin_notifikasi_title" id="Padmin_notifikasi_title">
            <h2>Notifikasi <span>Pesan</span></h2>
          </div>
          <div class="Padmin_notifikasi_content" id="Padmin_notifikasi_content">
            <div class="notifikasi_content" id="notifikasi_content">
              <div class="notifikasi_content_icon" id="notifikasi_content_icon_darurat">
                <i class="fa-solid fa-bell"></i>
                <div class="notifikasi_content_pesan" id="notifikasi_content_pesan">
                  <p>Ada 2 pelayanan darurat yang belum dilayani</p>
                </div>
              </div>
              <div class="notifikasi_content_detail" id="notifikasi_content_detail_darurat">
                <a href="#">Lihat Pesanan</a>
              </div>
            </div>
            <div class="notifikasi_content" id="notifikasi_content">
              <div class="notifikasi_content_icon" id="notifikasi_content_icon">
                <i class="fa-solid fa-bell"></i>
                <div class="notifikasi_content_pesan" id="notifikasi_content_pesan">
                  <p>Ada 2 pelayanan darurat yang belum dilayani</p>
                </div>
              </div>
              <div class="notifikasi_content_detail" id="notifikasi_content_detail">
                <a href="#">Lihat Pesanan</a>
              </div>
            </div>
            <div class="notifikasi_content" id="notifikasi_content">
              <div class="notifikasi_content_icon" id="notifikasi_content_icon">
                <i class="fa-solid fa-bell"></i>
                <div class="notifikasi_content_pesan" id="notifikasi_content_pesan">
                  <p>Ada 2 pelayanan darurat yang belum dilayani</p>
                </div>
              </div>
              <div class="notifikasi_content_detail" id="notifikasi_content_detail">
                <a href="#">Lihat Pesanan</a>
              </div>
            </div>
            <div class="notifikasi_content" id="notifikasi_content">
              <div class="notifikasi_content_icon" id="notifikasi_content_icon">
                <i class="fa-solid fa-bell"></i>
                <div class="notifikasi_content_pesan" id="notifikasi_content_pesan">
                  <p>Ada 2 pelayanan darurat yang belum dilayani</p>
                </div>
              </div>
              <div class="notifikasi_content_detail" id="notifikasi_content_detail">
                <a href="#">Lihat Pesanan</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="Padmin_pelayananmasuk">
        <div class="Padmin_pelayananmasuk_wrapper">
          <form action="/updateDokterPassword/<%= DokterData.id_stafkesehatan %>" method="post" class="edit-profile-perusahaan" id="changepassform">
            <div class="Padmin_pelayananmasuk_pic">
              <img src="/img/<%= DokterData.photo_stafkesehatan %>" alt="" />
            </div>
            <div class="Padmin_pelayananmasuk_data">
              <div class="Padmin_pelayananmasuk_datamenu">
                <h3>Password Lama</h3>
                <div class="Padmin_pelayananmasuk_datamenu_input">
                  <i class="fa-solid fa-user-lock"></i>
                  <input type="password" name="password_lama" id="password_lama" placeholder="Masukan Password Lama . . ." />
                  <i class="fa-solid fa-eye" style="cursor: pointer"></i>
                </div>
              </div>
              <div class="Padmin_pelayananmasuk_datamenu">
                <h3>Password Baru</h3>
                <div class="Padmin_pelayananmasuk_datamenu_input">
                  <i class="fa-solid fa-key"></i>
                  <input type="password" name="password_baru" id="password_baru" placeholder="Masukan Password Baru . . ." />
                  <i class="fa-solid fa-eye" style="cursor: pointer"></i>
                </div>
              </div>
              <div class="Padmin_pelayananmasuk_datamenu">
                <h3>Konfirmasi Password Baru</h3>
                <div class="Padmin_pelayananmasuk_datamenu_input">
                  <i class="fa-solid fa-key"></i>
                  <input type="password" name="konfirm_pass" id="konfirm_pass" placeholder="Masukan Konfirmasi Password Baru . . ." />
                  <i class="fa-solid fa-eye" style="cursor: pointer"></i>
                </div>
              </div>
            </div>
            <br />
            <br />
            <br />
            <br />
            <br />
            <div class="edit-all-button">
              <div class="edit-menu-button">
                <button type="submit">Edit Password</button>
              </div>
              <div class="back-menu-button">
                <a href="/EditPDokter_admin">Kembali</a>
              </div>
            </div>
            <div class="validasi" id="validasi">
              <p id="validasi_text">Pastikan data yang anda masukkan benar dan valid</p>
            </div>
          </form>
        </div>
      </div>

      <div class="Padmin_notifikasi_obatvaksin_responsive" id="none">
        <div class="Padmin_notifikasi_obatvaksin">
          <div class="Padmin_notifikasi_title">
            <h2>Stok<span>Obat</span></h2>
          </div>
          <div class="Padmin_stok_obatvaksin">
            <a href="/StokObat_admin">Lihat Stok Obat</a>
          </div>
        </div>
        <div class="Padmin_notifikasi_obatvaksin">
          <div class="Padmin_notifikasi_title">
            <h2>Stok<span>Vaksin</span></h2>
          </div>
          <div class="Padmin_stok_obatvaksin">
            <a href="/StokVaksin_admin">Lihat Stok Vaksin</a>
          </div>
        </div>
      </div>
    </div>
    <div class="PAdmin_right">
      <div class="Padmin_notifikasi_wrapper">
        <div class="Padmin_notifikasi_title">
          <h2>Notifikasi <span>Pesan</span></h2>
        </div>
        <div class="Padmin_notifikasi_content">
          <div class="Padmin_notifikasi_darurat">
            <div class="Padmin_notifikasi_darurat_icon">
              <i class="fa-solid fa-bell"></i>
            </div>
            <div class="Padmin_notifikasi_darurat_text">
              <p>Ada 2 pelayanan darurat yang belum dilayani</p>
            </div>
          </div>
          <div class="Padmin_notifikasi_detail">
            <a href="/LDarurat_admin">Lihat Pesanan</a>
          </div>
          <div class="Padmin_notifikasi_medical">
            <div class="Padmin_notifikasi_medical_icon">
              <i class="fa-solid fa-bell"></i>
            </div>
            <div class="Padmin_notifikasi_medical_text">
              <p>Ada 2 pelayanan medical check up yang belum dilayani</p>
            </div>
          </div>
          <div class="Padmin_notifikasi_detail" id="Padmin_notifikasi_detail">
            <a href="/LMedical_admin">Lihat Pesanan</a>
          </div>
          <div class="Padmin_notifikasi_vaksin">
            <div class="Padmin_notifikasi_vaksin_icon">
              <i class="fa-solid fa-bell"></i>
            </div>
            <div class="Padmin_notifikasi_vaksin_text">
              <p>Ada 2 pelayanan vaksinasi yang belum dilayani</p>
            </div>
          </div>
          <div class="Padmin_notifikasi_detail" id="Padmin_notifikasi_detail">
            <a href="/LVaksin_admin">Lihat Pesanan</a>
          </div>
          <div class="Padmin_notifikasi_vaksin">
            <div class="Padmin_notifikasi_vaksin_icon">
              <i class="fa-solid fa-bell"></i>
            </div>
            <div class="Padmin_notifikasi_vaksin_text">
              <p>Ada 2 permintaan penambahan proyek yang belum dikonfirmasi</p>
            </div>
          </div>
          <div class="Padmin_notifikasi_detail" id="Padmin_notifikasi_detail">
            <a href="/index_admin">Lihat Pesanan</a>
          </div>
          <div class="Padmin_notifikasi_obatvaksin">
            <div class="Padmin_notifikasi_title">
              <h2>Stok<span>Obat</span></h2>
            </div>
            <div class="Padmin_stok_obatvaksin">
              <a href="/StokObat_admin">Lihat Stok Obat</a>
            </div>
          </div>
          <div class="Padmin_notifikasi_obatvaksin">
            <div class="Padmin_notifikasi_title">
              <h2>Stok<span>Vaksin</span></h2>
            </div>
            <div class="Padmin_stok_obatvaksin">
              <a href="/StokVaksin_admin">Lihat Stok Vaksin</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  document.querySelector(".Padmin_pelayananmasuk_pic").addEventListener("click", function () {
    document.getElementById("fileInput").click();
  });

  document.getElementById("fileInput").addEventListener("change", function (event) {
    const reader = new FileReader();
    reader.onload = function () {
      document.getElementById("profilePic").src = reader.result;
    };
    reader.readAsDataURL(event.target.files[0]);
  });
</script>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const passwordInputs = document.querySelectorAll("input[type='password']");
    const changepassform = document.getElementById("changepassform");

    changepassform.addEventListener("submit", function (event) {
      const passwordlama = document.getElementById("password_lama").value;
      const passwordbaru = document.getElementById("password_baru").value;
      const konfirmpass = document.getElementById("konfirm_pass").value;
      const validasiDiv = document.getElementById("validasi");

      let valid = true;
      let validasiText = "Pastikan data yang anda masukkan benar dan valid";

      // Validasi password lama
      if (passwordlama === "") {
        validasiText = "Password lama tidak boleh kosong";
        valid = false;
      }

      // Validasi password baru tak boleh kosong dan 8 karakter, kombinasi huruf dan angka
      if (passwordbaru === "") {
        validasiText = "Password baru tidak boleh kosong";
        valid = false;
      } else if (passwordbaru.length < 8) {
        validasiText = "Password baru minimal 8 karakter";
        valid = false;
      } else if (!passwordbaru.match(/[a-z]/) || !passwordbaru.match(/[0-9]/)) {
        validasiText = "Password baru harus mengandung huruf dan angka";
        valid = false;
      }

      // Validasi konfirmasi password
      if (konfirmpass === "") {
        validasiText = "Konfirmasi password tidak boleh kosong";
        valid = false;
      } else if (konfirmpass !== passwordbaru) {
        validasiText = "Konfirmasi password tidak sama dengan password baru";
        valid = false;
      }

      if (!valid) {
        event.preventDefault();
        validasiDiv.style.display = "flex";
        document.getElementById("validasi_text").innerText = validasiText;
      } else {
        validasiDiv.style.display = "none";
      }
    });

    passwordInputs.forEach(function (input) {
      const eyeIcon = input.nextElementSibling;

      eyeIcon.addEventListener("click", function () {
        const type = input.getAttribute("type") === "password" ? "text" : "password";
        input.setAttribute("type", type);
        eyeIcon.classList.toggle("fa-eye-slash");
      });
    });
  });
</script>
<style>
  .validasi {
    display: none;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    margin-top: 10px;
    border: 1px dashed var(--red-color);
    padding: 5px;
    text-align: center;
  }
  .validasi p {
    color: var(--red-color);
    font-size: 12px;
    text-align: center;
  }
</style>
